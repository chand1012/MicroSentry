<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <title>Turret</title>
    </head>
    <script type="text/javascript">
        var xpos = 90;
        var trig = 0;
        var sendstring = "";
        function doWork(trigstring, event){
            $.post("/postrequest", {"byte":trigstring});
            //console.log(buttonid);
            if (event!=="undefined") {
                event.preventDefault();
            }
        }
        function genSend(xpos, trig){
            if (xpos<100){
                return "0"+toString(xpos)+toString(trig);
            } else {
                return toString(xpos)+toString(trig);
            }
        }
        window.addEventListener('keydown', function(event){
            if (event.keyCode == 37 && (xpos!=180 || xpos!=0)) { // left
                xpos += 1;
            } else if (event.keyCode == 39 && (xpos!=180 || xpos!=0)) { // right
                xpos -= 1;
            } else if (event.keyCode == 32){
                trig = 1;
            }
            sendstring = genSend(xpos, trig);
            doWork(sendstring, event);
        });
        window.addEventListener('keyup', function(event){
            if (event.keyCode == 32){
                trig = 0;
            }
            sendstring = genSend(xpos, trig);
            doWork(sendstring, event);
        });
        console.log("Script Loaded.");
    </script>
    
</html>