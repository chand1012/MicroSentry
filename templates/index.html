<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <title>Turret</title>
    </head>
    <script type="text/javascript">
        var xpos = 90;
        var trig = 0;
        var sendstring = "";
        function doWork(trigstring, event){
            console.log(trigstring);
            $.post("/postrequest", {"byte":trigstring});
            if (event!=="undefined") {
                event.preventDefault();
            }
        }
        function genSend(){
            if (xpos<100){
                return "0"+xpos.toString()+trig.toString();
            } else {
                return xpos.toString()+trig.toString();
            }
        }
        // the part after && can be simplified
        window.addEventListener('keydown', function(event){
            if (event.keyCode == 37 ) { // left
                xpos += 1;
            } else if (event.keyCode == 39 ) { // right
                xpos -= 1;
            } else if (event.keyCode == 32){
                trig = 1;
            }
            sendstring = genSend();
            doWork(sendstring, event);
        });
        window.addEventListener('keyup', function(event){
            if (event.keyCode == 32){
                trig = 0;
            }
            sendstring = genSend();
            doWork(sendstring, event);
        });
        console.log("Script Loaded.");
    </script>
    
</html>